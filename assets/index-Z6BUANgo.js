import{r as t,M as V,j as n,i as B,u as I,P as H,a as F,b as D,L as A,G as N,c as G,m as k,h as W}from"./index-BoNPfajd.js";class X extends t.Component{getSnapshotBeforeUpdate(a){const s=this.props.childRef.current;if(s&&a.isPresent&&!this.props.isPresent){const l=s.offsetParent,o=B(l)&&l.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=o-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function K({children:e,isPresent:a,anchorX:s,root:l}){const o=t.useId(),i=t.useRef(null),m=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=t.useContext(V);return t.useInsertionEffect(()=>{const{width:x,height:f,top:b,left:h,right:p}=m.current;if(a||!i.current||!x||!f)return;const c=s==="left"?`left: ${h}`:`right: ${p}`;i.current.dataset.motionPopId=o;const r=document.createElement("style");d&&(r.nonce=d);const y=l??document.head;return y.appendChild(r),r.sheet&&r.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${x}px !important;
            height: ${f}px !important;
            ${c}px !important;
            top: ${b}px !important;
          }
        `),()=>{y.contains(r)&&y.removeChild(r)}},[a]),n.jsx(X,{isPresent:a,childRef:i,sizeRef:m,children:t.cloneElement(e,{ref:i})})}const U=({children:e,initial:a,isPresent:s,onExitComplete:l,custom:o,presenceAffectsLayout:i,mode:m,anchorX:d,root:x})=>{const f=I(Y),b=t.useId();let h=!0,p=t.useMemo(()=>(h=!1,{id:b,initial:a,isPresent:s,custom:o,onExitComplete:c=>{f.set(c,!0);for(const r of f.values())if(!r)return;l&&l()},register:c=>(f.set(c,!1),()=>f.delete(c))}),[s,f,l]);return i&&h&&(p={...p}),t.useMemo(()=>{f.forEach((c,r)=>f.set(r,!1))},[s]),t.useEffect(()=>{!s&&!f.size&&l&&l()},[s]),m==="popLayout"&&(e=n.jsx(K,{isPresent:s,anchorX:d,root:x,children:e})),n.jsx(H.Provider,{value:p,children:e})};function Y(){return new Map}const E=e=>e.key||"";function L(e){const a=[];return t.Children.forEach(e,s=>{t.isValidElement(s)&&a.push(s)}),a}const $=({children:e,custom:a,initial:s=!0,onExitComplete:l,presenceAffectsLayout:o=!0,mode:i="sync",propagate:m=!1,anchorX:d="left",root:x})=>{const[f,b]=F(m),h=t.useMemo(()=>L(e),[e]),p=m&&!f?[]:h.map(E),c=t.useRef(!0),r=t.useRef(h),y=I(()=>new Map),[P,u]=t.useState(h),[v,R]=t.useState(h);D(()=>{c.current=!1,r.current=h;for(let C=0;C<v.length;C++){const g=E(v[C]);p.includes(g)?y.delete(g):y.get(g)!==!0&&y.set(g,!1)}},[v,p.length,p.join("-")]);const M=[];if(h!==P){let C=[...h];for(let g=0;g<v.length;g++){const w=v[g],S=E(w);p.includes(S)||(C.splice(g,0,w),M.push(w))}return i==="wait"&&M.length&&(C=M),R(L(C)),u(h),null}const{forceRender:z}=t.useContext(A);return n.jsx(n.Fragment,{children:v.map(C=>{const g=E(C),w=m&&!f?!1:h===v||p.includes(g),S=()=>{if(y.has(g))y.set(g,!0);else return;let O=!0;y.forEach(T=>{T||(O=!1)}),O&&(z?.(),R(r.current),m&&b?.(),l&&l())};return n.jsx(U,{isPresent:w,initial:!c.current||s?void 0:!1,custom:a,presenceAffectsLayout:o,mode:i,root:x,onExitComplete:w?void 0:S,anchorX:d,children:C},g)})})};function _(e){return N({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"},child:[]}]})(e)}function q(e){return N({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(e)}function J(e){return N({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"},child:[]}]})(e)}function Q(e){return N({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"},child:[]}]})(e)}const Z=({slide:e,current:a,total:s,onPrev:l,onNext:o})=>{const[i,m]=t.useState(!0),d=G(),x=t.useRef(null),[f,b]=t.useState(0);t.useLayoutEffect(()=>{if(x.current){const{height:u}=x.current.getBoundingClientRect();b(u)}},[e.id]);const h=t.useCallback(()=>{a>0&&(d.stop(),l())},[a,l,d]),p=t.useCallback(()=>{d.stop(),o()},[o,d]),c=t.useCallback(()=>{m(u=>!u)},[]),r=t.useMemo(()=>[{icon:n.jsx(J,{size:18}),onClick:h,disabled:a===0},{icon:i?n.jsx(_,{size:18}):n.jsx(q,{size:18}),onClick:c,disabled:!1},{icon:n.jsx(Q,{size:18}),onClick:p,disabled:!1}],[a,i]);t.useEffect(()=>{if(d.set({width:0}),i){d.start({width:"100%",transition:{duration:5,ease:"linear"}});const u=window.setTimeout(o,5e3);return()=>{clearTimeout(u),d.stop()}}return()=>void d.stop()},[e.id,i,o,d]);const[y,P]=t.useMemo(()=>[String(a+1).padStart(2,"0"),String(s).padStart(2,"0")],[a,s]);return n.jsxs("div",{className:"flex flex-col items-center w-full max-w-lg px-4 sm:px-6 lg:px-8 mt-8",children:[n.jsx(k.div,{className:"inline-flex items-center space-x-4 bg-gray-100 dark:bg-[#1f1f1f] rounded-xl shadow-sm px-4 py-2",initial:!1,animate:{opacity:1,y:0},transition:{duration:.4},children:r.map((u,v)=>n.jsx(k.button,{onClick:u.disabled?void 0:u.onClick,disabled:u.disabled,whileHover:u.disabled?{}:{scale:1.15},whileTap:u.disabled?{}:{scale:.9},className:u.disabled?"p-3 bg-white dark:bg-[#24272b] rounded-full shadow-md focus:outline-none transition opacity-50":"p-3 bg-white dark:bg-[#24272b] rounded-full shadow-md hover:shadow-lg focus:outline-none transition cursor-pointer",children:n.jsx("span",{className:"text-gray-600 dark:text-gray-200",children:u.icon})},v))}),n.jsxs("div",{className:"w-full flex justify-between mt-4 mb-1 px-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:y}),n.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:P})]}),n.jsx("div",{className:"w-full h-1 bg-gray-300 dark:bg-gray-600 rounded-full overflow-hidden",children:n.jsx(k.div,{animate:d,className:"h-full bg-blue-500 dark:bg-blue-400",style:{width:0}})}),n.jsx("div",{ref:x,className:"w-full mt-6 px-2 lg:px-4 py-4",style:{minHeight:f||void 0,overflow:"visible"},children:n.jsx($,{mode:"wait",children:n.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeOut"},className:"group cursor-pointer flex flex-col items-center justify-center space-y-1",onClick:o,children:[n.jsx("h3",{className:"truncate text-xl sm:text-2xl md:text-3xl font-semibold text-gray-800 dark:text-white group-hover:underline group-hover:decoration-[1px]",children:e.title}),n.jsx("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400 group-hover:underline group-hover:decoration-[1px]",children:e.period}),n.jsx("p",{className:"text-sm sm:text-base text-gray-700 dark:text-gray-300 group-hover:underline group-hover:decoration-[1px]",children:e.tech})]},e.id)})})]})},ee=t.memo(Z),te=({card:e,index:a,isTop:s,onSwipe:l,dirRef:o})=>{const i=t.useCallback((d,x)=>{Math.abs(x.offset.x)>100&&(o.current=x.offset.x>0?1:-1,l())},[o,l]),m=t.useCallback(()=>{o.current=1,l()},[o,l]);return n.jsxs(k.div,{drag:s?"x":!1,dragConstraints:{left:0,right:0},onDragEnd:i,onTap:s?m:void 0,initial:{x:e.xOffset,y:e.yOffset+50,scale:.9,rotate:e.rotateOffset,opacity:0},animate:{x:e.xOffset,y:e.yOffset,scale:e.scale,rotate:e.rotateOffset,opacity:1,transition:{delay:a*.1,type:"spring",stiffness:200,damping:25}},exit:{x:e.xOffset+o.current*(Math.random()*200+100),y:e.yOffset-(Math.random()*50+50),rotate:e.rotateOffset+o.current*(Math.random()*20+10),opacity:0,transition:{duration:.4}},style:{zIndex:a},className:`absolute inset-0 rounded-xl overflow-hidden shadow-2xl cursor-pointer select-none ${e.contain?"bg-white":""}`,children:[n.jsx("img",{src:e.image,alt:e.title,loading:"lazy",draggable:"false",className:`absolute inset-0 w-full h-full object-center ${e.contain?"object-contain":"object-fill"}`}),n.jsx("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-b from-black/5 via-black/10 to-black/15"})]})},se=t.memo(te),j=W.flatMap(e=>e.projects).reverse(),ne=()=>{const[e,a]=t.useState(j),[s,l]=t.useState([]),o=t.useRef(0),i=t.useRef({}),m=t.useMemo(()=>e.map((u,v)=>{i.current[u.id]||(i.current[u.id]={x:(Math.random()*2-1)*20,y:(Math.random()*2-1)*10,r:(Math.random()*2-1)*5});const{x:R,y:M,r:z}=i.current[u.id];return{...u,xOffset:R,yOffset:M,rotateOffset:z,scale:1-(e.length-1-v)*.01}}),[e]),d=t.useCallback(()=>{if(e.length>1){o.current=1;const c=e[e.length-1];a(r=>r.slice(0,-1)),l(r=>[...r,c])}else o.current=1,a(j),l([])},[e]),x=t.useCallback(()=>{if(s.length>0){o.current=-1;const c=s[s.length-1];l(r=>r.slice(0,-1)),a(r=>[...r,c])}else{o.current=-1;const c=j.slice(0,j.length-1),r=j[j.length-1];l(c),a([r])}},[s]),f=j.length,b=s.length<f?s.length:0,h=e.length>0?e[e.length-1]:j[0],p={initial:{opacity:0,y:20},shrink:{opacity:1,y:0,transition:{duration:.5}}};return n.jsxs(k.div,{className:"flex-1 flex flex-col items-center justify-center gap-8 px-4 py-4",variants:p,initial:"initial",animate:"shrink",children:[n.jsx("div",{className:"relative w-[20rem] sm:w-[24rem] md:w-[28rem] lg:w-[40rem] xl:w-[36rem] 2xl:w-[48rem] h-[20rem] sm:h-[22rem] md:h-[24rem] lg:h-[28rem] xl:h-[30rem] 2xl:h-[32rem] max-w-full",children:n.jsx($,{initial:!1,children:m.map((c,r)=>n.jsx(se,{card:c,index:r,isTop:r===m.length-1,onSwipe:d,dirRef:o},c.id))})}),n.jsx(ee,{slide:h,current:b,total:f,onPrev:x,onNext:d})]})},ie=t.memo(ne);export{ie as default};
